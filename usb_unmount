#!/bin/sh

drives=$(lsblk -n -i -o name,size,mountpoint | grep -v -e "sda" -e "sdb" | grep  "sd.[0-9]" | sed 's/`-//g;s/|-//g' | awk '$3 != "" {print $1 " : " $2}' )

if [ -z "$drives" ]; then
   notify-send "Nothing To Unmount"
else
	mount="$(printf "$drives" | dmenu -i -p "Select To Unmount: " | awk '{print $1}')"
	udisksctl unmount -b "/dev/$mount" && notify-send "$mount Unmounted" || notify-send -u critical "Can't Unmount $mount"
fi
